{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Tan-chan # A utility library which extends Tanjun. Installation # You can install Tan-chan from PyPI using the following command in any Python 3.9 or above environment. python -m pip install -U tanchan Quick Usage # For usage see the documentation and the usage guide . Support # Hikari's support guild provides for support for Tan-chan. Contributing # Before contributing you should read through the contributing guidelines and the code of conduct .","title":"Home"},{"location":"#tan-chan","text":"A utility library which extends Tanjun.","title":"Tan-chan"},{"location":"#installation","text":"You can install Tan-chan from PyPI using the following command in any Python 3.9 or above environment. python -m pip install -U tanchan","title":"Installation"},{"location":"#quick-usage","text":"For usage see the documentation and the usage guide .","title":"Quick Usage"},{"location":"#support","text":"Hikari's support guild provides for support for Tan-chan.","title":"Support"},{"location":"#contributing","text":"Before contributing you should read through the contributing guidelines and the code of conduct .","title":"Contributing"},{"location":"changelog/","text":"Changelog # All notable changes to this project will be documented in this file. The format is based on Keep a Changelog , and this project adheres to Semantic Versioning . Unreleased # 0.2.0 - 2022-12-07 # Added # Support for Sphinx style reST docs to doc parse. Optional name argument to tanchan.doc_parse.as_slash_command which allows overriding the command's name. Fixed # tanchan.doc_parse.as_slash_command no-longer errors when the callback's docstring is just the description and doc_style is None . tanchan.doc_parse.with_annotated_args now allows None to be explicitly passed to doc_style typing wise. 0.1.0 - 2022-12-02 # Added # An extension to tanjun.annotations which allows for parsing slash command descriptions (including for options) from the command callback's docstring + using the callback's name as the command's name.","title":"Changelog"},{"location":"changelog/#changelog","text":"All notable changes to this project will be documented in this file. The format is based on Keep a Changelog , and this project adheres to Semantic Versioning .","title":"Changelog"},{"location":"changelog/#unreleased","text":"","title":"Unreleased"},{"location":"changelog/#020-2022-12-07","text":"","title":"0.2.0 - 2022-12-07"},{"location":"changelog/#added","text":"Support for Sphinx style reST docs to doc parse. Optional name argument to tanchan.doc_parse.as_slash_command which allows overriding the command's name.","title":"Added"},{"location":"changelog/#fixed","text":"tanchan.doc_parse.as_slash_command no-longer errors when the callback's docstring is just the description and doc_style is None . tanchan.doc_parse.with_annotated_args now allows None to be explicitly passed to doc_style typing wise.","title":"Fixed"},{"location":"changelog/#010-2022-12-02","text":"","title":"0.1.0 - 2022-12-02"},{"location":"changelog/#added_1","text":"An extension to tanjun.annotations which allows for parsing slash command descriptions (including for options) from the command callback's docstring + using the callback's name as the command's name.","title":"Added"},{"location":"usage/","text":"Usage # Doc parse # tanchan.doc_parse exposes two methods which help with declaring slash commands: import tanjun from tanchan import doc_parse # This command will show up as \"meow\" in the command menu @doc_parse . as_slash_command () async def meow ( ctx : tanjun . abc . SlashContext ) -> None : \"\"\"Meow command's description.\"\"\" ... get_group = tanjun . slash_command_group ( \"get\" , \"Get command group\" ) # This command will show up as \"get user\" in the command menu @get_group . with_command @doc_parse . as_slash_command () async def user ( ctx : tanjun . abc . SlashContext ) -> None : \"\"\"Get a user.\"\"\" ... tanchan.doc_parse.as_slash_command acts as an extension to tanjun.as_slash_command which uses the function's name as the command's name and the first line of its docstring as the command's description. import typing import tanjun from tanchan import doc_parse from tanjun import annotations # Google's doc style. @doc_parse . with_annotated_args @doc_parse . as_slash_command () async def ban ( ctx : tanjun . abc . SlashContext , user : annotations . User , reason : typing . Optional [ annotations . Length [ 460 ]] = None , ) -> None : \"\"\"Ban a user from this guild. Args: user: The user to ban from this guild. reason: The reason for the ban. If not provided then a generic reason will be used. \"\"\" # NumPy's doc style. @doc_parse . with_annotated_args @doc_parse . as_slash_command () async def kick ( ctx : tanjun . abc . SlashContext , member : annotations . Member , reason : typing . Optional [ annotations . Length [ 460 ]] = None , ) -> None : \"\"\"Kick a member from this guild. Parameters ---------- member The guild member to kick. reason The reason for the kick. If not provided then a generic reason will be used. \"\"\" # Sphinx's \"reST\" doc style. @doc_parse . with_annotated_args @doc_parse . as_slash_command () async def echo ( ctx : tanjun . abc . SlashContext , content : annotations . Str , channel : typing . Optional [ annotations . Channel ] = None , ) -> None : \"\"\"Make the bot echo a message. :param content: The message to echo. :param channel: The channel to echo to. If not provided then the current channel will be targeted. \"\"\" tanchan.doc_parse.with_annotated_args uses the functionality exposed in tanjun.annotations but with the added feature that slash command option descriptions are parsed from the docstring. This supports Google's doc style, NumPy's doc style, and Sphinx's \"reST\" doc style.","title":"Usage"},{"location":"usage/#usage","text":"","title":"Usage"},{"location":"usage/#doc-parse","text":"tanchan.doc_parse exposes two methods which help with declaring slash commands: import tanjun from tanchan import doc_parse # This command will show up as \"meow\" in the command menu @doc_parse . as_slash_command () async def meow ( ctx : tanjun . abc . SlashContext ) -> None : \"\"\"Meow command's description.\"\"\" ... get_group = tanjun . slash_command_group ( \"get\" , \"Get command group\" ) # This command will show up as \"get user\" in the command menu @get_group . with_command @doc_parse . as_slash_command () async def user ( ctx : tanjun . abc . SlashContext ) -> None : \"\"\"Get a user.\"\"\" ... tanchan.doc_parse.as_slash_command acts as an extension to tanjun.as_slash_command which uses the function's name as the command's name and the first line of its docstring as the command's description. import typing import tanjun from tanchan import doc_parse from tanjun import annotations # Google's doc style. @doc_parse . with_annotated_args @doc_parse . as_slash_command () async def ban ( ctx : tanjun . abc . SlashContext , user : annotations . User , reason : typing . Optional [ annotations . Length [ 460 ]] = None , ) -> None : \"\"\"Ban a user from this guild. Args: user: The user to ban from this guild. reason: The reason for the ban. If not provided then a generic reason will be used. \"\"\" # NumPy's doc style. @doc_parse . with_annotated_args @doc_parse . as_slash_command () async def kick ( ctx : tanjun . abc . SlashContext , member : annotations . Member , reason : typing . Optional [ annotations . Length [ 460 ]] = None , ) -> None : \"\"\"Kick a member from this guild. Parameters ---------- member The guild member to kick. reason The reason for the kick. If not provided then a generic reason will be used. \"\"\" # Sphinx's \"reST\" doc style. @doc_parse . with_annotated_args @doc_parse . as_slash_command () async def echo ( ctx : tanjun . abc . SlashContext , content : annotations . Str , channel : typing . Optional [ annotations . Channel ] = None , ) -> None : \"\"\"Make the bot echo a message. :param content: The message to echo. :param channel: The channel to echo to. If not provided then the current channel will be targeted. \"\"\" tanchan.doc_parse.with_annotated_args uses the functionality exposed in tanjun.annotations but with the added feature that slash command option descriptions are parsed from the docstring. This supports Google's doc style, NumPy's doc style, and Sphinx's \"reST\" doc style.","title":"Doc parse"},{"location":"reference/doc_parse/","text":"tanchan.doc_parse # tanjun.annotations extension which uses docstring parsing. as_slash_command # as_slash_command ( * , always_defer = False , default_member_permissions = None , default_to_ephemeral = None , dm_enabled = None , is_global = True , name = None , sort_options = True , validate_arg_keys = True ) Build a tanjun.SlashCommand by decorating a function. This uses the function's name as the command's name and the first line of its docstring as the command's description. Note Under the standard implementation, is_global is used to determine whether the command should be bulk set by tanjun.Client.declare_global_commands or when declare_global_commands is True Warning default_member_permissions , dm_enabled and is_global are ignored for commands within slash command groups. Note If you want your first response to be ephemeral while using always_defer , you must set default_to_ephemeral to True . Examples: @as_slash_command ( \"ping\" , \"Get the bot's latency\" ) async def ping_command ( self , ctx : tanjun . abc . SlashContext ) -> None : start_time = time . perf_counter () await ctx . rest . fetch_my_user () time_taken = ( time . perf_counter () - start_time ) * 1_000 await ctx . respond ( f \"PONG \\n - REST: { time_taken : .0f } mss\" ) PARAMETER DESCRIPTION always_defer Whether the contexts this command is executed with should always be deferred before being passed to the command's callback. TYPE: bool DEFAULT: False default_member_permissions Member permissions necessary to utilize this command by default. If this is None then the configuration for the parent component or client will be used. TYPE: typing . Union [ hikari . Permissions , int , None] DEFAULT: None default_to_ephemeral Whether this command's responses should default to ephemeral unless flags are set to override this. If this is left as None then the default set on the parent command(s), component or client will be in effect. TYPE: typing . Optional [ bool ] DEFAULT: None dm_enabled Whether this command is enabled in DMs with the bot. If this is None then the configuration for the parent component or client will be used. TYPE: typing . Optional [ bool ] DEFAULT: None is_global Whether this command is a global command. TYPE: bool DEFAULT: True name The command's name. This must fit discord's requirements and if left as None then the command callback's name is used. TYPE: typing . Optional [ str ] DEFAULT: None sort_options Whether this command should sort its set options based on whether they're required. If this is True then the options are re-sorted to meet the requirement from Discord that required command options be listed before optional ones. TYPE: bool DEFAULT: True validate_arg_keys Whether to validate that option keys match the command callback's signature. TYPE: bool DEFAULT: True RETURNS DESCRIPTION collections . abc . Callable [[ tanjun . abc . CommandCallbackSig ], SlashCommand ] The decorator callback used to make a tanjun.SlashCommand . This can either wrap a raw command callback or another callable command instance (e.g. tanjun.MenuCommand , tanjun.MessageCommand tanjun.SlashCommand ) and will manage loading the other command into a component when using tanjun.Component.load_from_scope . RAISES DESCRIPTION ValueError Raises a value error for any of the following reasons: If the command name is over 32 characters long. If the command name has uppercase characters. If the description is over 100 characters long. with_annotated_args # with_annotated_args ( command = None , / , * , doc_style = None , follow_wrapped = False ) Docstring parsing implementation of tanjun.annotations.with_annotated_args . This will parse descriptions from the command's docstring for a slash command's options. PARAMETER DESCRIPTION command The message or slash command to set the arguments for. TYPE: tanjun . SlashCommand | tanjun . MessageCommand DEFAULT: None doc_style The docstyle to parse slash command option descriptions from. This may be either \"google\" , \"numpy\" , or \"reST\" . If left as None then this will try to auto-detect the style. TYPE: typing . Optional [ _DocStyleUnion ] DEFAULT: None follow_wrapped Whether this should also set the arguments on any other command objects this wraps in a decorator call chain. TYPE: bool DEFAULT: False RETURNS DESCRIPTION tanjun . SlashCommand | tanjun . MessageCommand The command object to enable using this as a decorator. RAISES DESCRIPTION RuntimeError If doc_style is None and this failed to detect the docstring style.","title":"tanchan.doc_parse"},{"location":"reference/doc_parse/#tanchandoc_parse","text":"tanjun.annotations extension which uses docstring parsing.","title":"tanchan.doc_parse"},{"location":"reference/doc_parse/#tanchan.doc_parse.as_slash_command","text":"as_slash_command ( * , always_defer = False , default_member_permissions = None , default_to_ephemeral = None , dm_enabled = None , is_global = True , name = None , sort_options = True , validate_arg_keys = True ) Build a tanjun.SlashCommand by decorating a function. This uses the function's name as the command's name and the first line of its docstring as the command's description. Note Under the standard implementation, is_global is used to determine whether the command should be bulk set by tanjun.Client.declare_global_commands or when declare_global_commands is True Warning default_member_permissions , dm_enabled and is_global are ignored for commands within slash command groups. Note If you want your first response to be ephemeral while using always_defer , you must set default_to_ephemeral to True . Examples: @as_slash_command ( \"ping\" , \"Get the bot's latency\" ) async def ping_command ( self , ctx : tanjun . abc . SlashContext ) -> None : start_time = time . perf_counter () await ctx . rest . fetch_my_user () time_taken = ( time . perf_counter () - start_time ) * 1_000 await ctx . respond ( f \"PONG \\n - REST: { time_taken : .0f } mss\" ) PARAMETER DESCRIPTION always_defer Whether the contexts this command is executed with should always be deferred before being passed to the command's callback. TYPE: bool DEFAULT: False default_member_permissions Member permissions necessary to utilize this command by default. If this is None then the configuration for the parent component or client will be used. TYPE: typing . Union [ hikari . Permissions , int , None] DEFAULT: None default_to_ephemeral Whether this command's responses should default to ephemeral unless flags are set to override this. If this is left as None then the default set on the parent command(s), component or client will be in effect. TYPE: typing . Optional [ bool ] DEFAULT: None dm_enabled Whether this command is enabled in DMs with the bot. If this is None then the configuration for the parent component or client will be used. TYPE: typing . Optional [ bool ] DEFAULT: None is_global Whether this command is a global command. TYPE: bool DEFAULT: True name The command's name. This must fit discord's requirements and if left as None then the command callback's name is used. TYPE: typing . Optional [ str ] DEFAULT: None sort_options Whether this command should sort its set options based on whether they're required. If this is True then the options are re-sorted to meet the requirement from Discord that required command options be listed before optional ones. TYPE: bool DEFAULT: True validate_arg_keys Whether to validate that option keys match the command callback's signature. TYPE: bool DEFAULT: True RETURNS DESCRIPTION collections . abc . Callable [[ tanjun . abc . CommandCallbackSig ], SlashCommand ] The decorator callback used to make a tanjun.SlashCommand . This can either wrap a raw command callback or another callable command instance (e.g. tanjun.MenuCommand , tanjun.MessageCommand tanjun.SlashCommand ) and will manage loading the other command into a component when using tanjun.Component.load_from_scope . RAISES DESCRIPTION ValueError Raises a value error for any of the following reasons: If the command name is over 32 characters long. If the command name has uppercase characters. If the description is over 100 characters long.","title":"as_slash_command()"},{"location":"reference/doc_parse/#tanchan.doc_parse.with_annotated_args","text":"with_annotated_args ( command = None , / , * , doc_style = None , follow_wrapped = False ) Docstring parsing implementation of tanjun.annotations.with_annotated_args . This will parse descriptions from the command's docstring for a slash command's options. PARAMETER DESCRIPTION command The message or slash command to set the arguments for. TYPE: tanjun . SlashCommand | tanjun . MessageCommand DEFAULT: None doc_style The docstyle to parse slash command option descriptions from. This may be either \"google\" , \"numpy\" , or \"reST\" . If left as None then this will try to auto-detect the style. TYPE: typing . Optional [ _DocStyleUnion ] DEFAULT: None follow_wrapped Whether this should also set the arguments on any other command objects this wraps in a decorator call chain. TYPE: bool DEFAULT: False RETURNS DESCRIPTION tanjun . SlashCommand | tanjun . MessageCommand The command object to enable using this as a decorator. RAISES DESCRIPTION RuntimeError If doc_style is None and this failed to detect the docstring style.","title":"with_annotated_args()"}]}