{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Tan-chan","text":"<p>A utility library which extends Tanjun.</p>"},{"location":"#installation","title":"Installation","text":"<p>You can install Tan-chan from PyPI using the following command in any Python 3.9 or above environment.</p> <pre><code>python -m pip install -U tanchan\n</code></pre> <p>The commands provided in <code>tanchan.components</code> require the 3rd party library Hikari-Yuyo to work. The feature flag <code>tanchan[yuyo]</code> should be used to ensure that a compatible version of Yuyo is installed (i.e. <code>pip install -U tanchan[yuyo]</code>).</p>"},{"location":"#quick-usage","title":"Quick Usage","text":"<p>For usage see the documentation and the usage guide.</p>"},{"location":"#support","title":"Support","text":"<p>Hikari's support guild provides for support for Tan-chan.</p>"},{"location":"#contributing","title":"Contributing","text":"<p>Before contributing you should read through the contributing guidelines and the code of conduct.</p>"},{"location":"changelog/","title":"Changelog","text":"<p>All notable changes to this project will be documented in this file.</p> <p>The format is based on Keep a Changelog, and this project adheres to Semantic Versioning.</p>"},{"location":"changelog/#unreleased","title":"Unreleased","text":""},{"location":"changelog/#041-2023-12-28","title":"0.4.1 - 2023-12-28","text":""},{"location":"changelog/#added","title":"Added","text":"<ul> <li>Support for Python 3.12.</li> </ul>"},{"location":"changelog/#040-2023-08-28","title":"0.4.0 - 2023-08-28","text":""},{"location":"changelog/#added_1","title":"Added","text":"<ul> <li>Configurable and optional help commands which display information about the   loaded commands. These can be loaded from tanchan.components.help.</li> <li>Configurable and optional eval commands which let bot owners dynamically   execute code in the bot's runtime. These can be loaded from   tanchan.components.eval.</li> <li>The logic and builder for a stateless Yuyo button which lets command authors   delete responses. This can be loaded from tanchan.components.buttons and   is used by the eval and help commands.</li> </ul>"},{"location":"changelog/#031-2023-07-26","title":"0.3.1 - 2023-07-26","text":""},{"location":"changelog/#added_2","title":"Added","text":"<ul> <li>Support for the application command <code>nsfw</code> config option.</li> </ul>"},{"location":"changelog/#changed","title":"Changed","text":"<ul> <li>Bumped the minimum Tanjun version to <code>2.16.0</code>.</li> </ul>"},{"location":"changelog/#030-2023-03-12","title":"0.3.0 - 2023-03-12","text":""},{"location":"changelog/#changed_1","title":"Changed","text":"<ul> <li>with_annotated_args will now also parse   option descriptions from the docstring of the typed dict being used as an   unpacked <code>**kwargs</code> type hint.</li> </ul>"},{"location":"changelog/#022post-2023-03-04","title":"0.2.2.post - 2023-03-04","text":""},{"location":"changelog/#fixed","title":"Fixed","text":"<ul> <li>SlashCommandGroup.as_sub_command   now actually adds the created command to the group.</li> </ul>"},{"location":"changelog/#022-2023-03-03","title":"0.2.2 - 2023-03-03","text":""},{"location":"changelog/#added_3","title":"Added","text":"<ul> <li>Extended tanjun.SlashCommandGroup impl at tanchan.doc_parse.SlashCommandGroup   where the <code>name</code>, and <code>description</code> parameters are now optional and introspected from   the callback's docstring by default for   SlashCommandGroup.as_sub_command.   SlashCommandGroup.make_sub_group   also returns a tanchan.doc_parse.SlashCommandGroup instance.</li> <li>Optional <code>description</code> arg to tanchan.doc_parse.as_slash_command to allow   overriding the introspected value.</li> </ul>"},{"location":"changelog/#changed_2","title":"Changed","text":"<ul> <li>tanchan.doc_parse.as_slash_command is now typed to allow decorating   commands which match the abstract types in tanjun.abc, not just the   standard impls.</li> <li>A mapping of locales to values can now be passed for <code>name</code> to   tanchan.doc_parse.as_slash_command.</li> </ul>"},{"location":"changelog/#021-2023-02-01","title":"0.2.1 - 2023-02-01","text":""},{"location":"changelog/#changed_3","title":"Changed","text":"<ul> <li>Bumped the minimum Tanjun version to <code>v2.11.3</code>.</li> <li>Updated the type-hints for tanchan.doc_parse.as_slash_command to match   changes to Tanjun.</li> </ul>"},{"location":"changelog/#020-2022-12-07","title":"0.2.0 - 2022-12-07","text":""},{"location":"changelog/#added_4","title":"Added","text":"<ul> <li>Support for Sphinx style reST docs to doc parse.</li> <li>Optional <code>name</code> argument to tanchan.doc_parse.as_slash_command which   allows overriding the command's name.</li> </ul>"},{"location":"changelog/#fixed_1","title":"Fixed","text":"<ul> <li>tanchan.doc_parse.as_slash_command no-longer errors when the callback's   docstring is just the description and <code>doc_style</code> is None.</li> <li>tanchan.doc_parse.with_annotated_args now allows None to be explicitly   passed to <code>doc_style</code> typing wise.</li> </ul>"},{"location":"changelog/#010-2022-12-02","title":"0.1.0 - 2022-12-02","text":""},{"location":"changelog/#added_5","title":"Added","text":"<ul> <li>An extension to tanjun.annotations which allows for parsing slash command   descriptions (including for options) from the command callback's docstring +   using the callback's name as the command's name.</li> </ul>"},{"location":"usage/","title":"Usage","text":""},{"location":"usage/#doc-parse","title":"Doc parse","text":""},{"location":"usage/#as_slash_command","title":"as_slash_command","text":"<p>tanchan.doc_parse exposes two methods which help with declaring slash commands:</p> <pre><code>import tanjun\n\nfrom tanchan import doc_parse\n\n# This command will show up as \"meow\" in the command menu\n@doc_parse.as_slash_command()\nasync def meow(ctx: tanjun.abc.SlashContext) -&gt; None:\n    \"\"\"Meow command's description.\"\"\"\n\nget_group = tanjun.slash_command_group(\"get\", \"Get command group\")\n\n# This command will show up as \"get user\" in the command menu\n@get_group.with_command\n@doc_parse.as_slash_command()\nasync def user(ctx: tanjun.abc.SlashContext) -&gt; None:\n    \"\"\"Get a user.\"\"\"\n</code></pre> <p>tanchan.doc_parse.as_slash_command acts as an extension to tanjun.as_slash_command which uses the function's name as the command's name and the first line of its docstring as the command's description.</p>"},{"location":"usage/#with_annotated_args","title":"with_annotated_args","text":"<pre><code>from typing import Annotated\nfrom typing import Optional\n\nimport tanjun\nfrom tanjun import annotations\n\nfrom tanchan import doc_parse\n\n# Google's doc style.\n@doc_parse.with_annotated_args\n@doc_parse.as_slash_command()\nasync def ban(\n    ctx: tanjun.abc.SlashContext,\n    user: annotations.User,\n    reason: Optional[Annotated[annotations.Int, annotations.Length(460)]] = None,\n) -&gt; None:\n    \"\"\"Ban a user from this guild.\n\n    Args:\n        user: The user to ban from this guild.\n        reason: The reason for the ban.\n            If not provided then a generic reason will be used.\n    \"\"\"\n\n# NumPy's doc style.\n@doc_parse.with_annotated_args\n@doc_parse.as_slash_command()\nasync def kick(\n    ctx: tanjun.abc.SlashContext,\n    member: annotations.Member,\n    reason: Optional[Annotated[annotations.Int, annotations.Length(460)]] = None,\n) -&gt; None:\n    \"\"\"Kick a member from this guild.\n\n    Parameters\n    ----------\n    member\n        The guild member to kick.\n    reason\n        The reason for the kick.\n        If not provided then a generic reason will be used.\n    \"\"\"\n\n# Sphinx's \"reST\" doc style.\n@doc_parse.with_annotated_args\n@doc_parse.as_slash_command()\nasync def echo(\n    ctx: tanjun.abc.SlashContext, content: annotations.Str, channel: Optional[annotations.Channel] = None\n) -&gt; None:\n    \"\"\"Make the bot echo a message.\n\n    :param content: The message to echo.\n    :param channel: The channel to echo to.\n        If not provided then the current channel will be targeted.\n    \"\"\"\n</code></pre> <p>tanchan.doc_parse.with_annotated_args uses the functionality exposed in tanjun.annotations but with the added feature that slash command option descriptions are parsed from the docstring. This supports Google's doc style, NumPy's doc style, and Sphinx's \"reST\" doc style.</p>"},{"location":"usage/#commands","title":"Commands","text":"<p>Tan-chan provides several Tanjun commands which rely on the separate Yuyo components library. To ensure a compatible Yuyo version is present you should install Tan-chan with the <code>tanchan[yuyo]</code> install flag.</p> <p><code>\"tanchan.components\"</code> can be passed to Client.load_modules as a shorthand to add all of these commands and component handlers to a bot at once.</p> <p>Note</p> <p>Any command config should be added the Tanjun client before the commands are loaded.</p>"},{"location":"usage/#help-command","title":"Help command","text":"<p>Tan-chan implements help commands which give users more information about the commands loaded in a bot.</p> <p>The message command this introduces can be called as either <code>{prefix}help</code> to get a list of all available commands or as <code>{prefix}help {command name}</code> to get more information about a specific command. Commands are grouped by the name of their linked component by default so it's important to make sure you're passing legible <code>name=</code>s to tanjun.Component.__init__.</p> <p>By default slash command functionality is turned off but this can be enabled using tanchan.components.config.HelpConfig.</p> <p>These commands can be added to a bot by calling Client.load_modules with <code>\"tanchan.components.help\"</code>.</p>"},{"location":"usage/#eval-command","title":"Eval command","text":"<p>Tan-chan implements eval commands which allow bot owners to dynamically evaluate code in the bot's runtime.</p> <p>The message command this introduces can be called simply by sending <code>{prefix}eval</code> followed by a markdown codeblock of the code to execute.</p> <p>The slash eval command isn't included by default but this can be set to be declared globally or for specific guilds using tanchan.components.config.EvalConfig and its relevant <code>eval_guild_ids</code> option.</p> <p>These commands can be added to a bot by calling Client.load_modules with <code>\"tanchan.components.eval\"</code>.</p>"},{"location":"reference/components/","title":"tanchan.components","text":"<p>Commands, message components and modals implemented by Tan-chan for use with Tanjun and Yuyo.</p>"},{"location":"reference/components/#tanchan.components.buttons","title":"tanchan.components.buttons","text":"<p>Standard constant message components provided and used by Tanchan.</p>"},{"location":"reference/components/#tanchan.components.buttons.DELETE_CUSTOM_ID","title":"DELETE_CUSTOM_ID  <code>module-attribute</code>","text":"<pre><code>DELETE_CUSTOM_ID = 'TC_DEL'\n</code></pre> <p>Match ID used for delete buttons.</p>"},{"location":"reference/components/#tanchan.components.buttons.DELETE_EMOJI","title":"DELETE_EMOJI  <code>module-attribute</code>","text":"<pre><code>DELETE_EMOJI = UnicodeEmoji('\u2716\ufe0f')\n</code></pre> <p>Emoji used for \"delete\" buttons.</p>"},{"location":"reference/components/#tanchan.components.buttons.OWNER_QS_KEY","title":"OWNER_QS_KEY  <code>module-attribute</code>","text":"<pre><code>OWNER_QS_KEY = 'a'\n</code></pre> <p>Query string key for the author field.</p>"},{"location":"reference/components/#tanchan.components.buttons.delete_row","title":"delete_row","text":"<pre><code>delete_row(ctx_or_author, /, *ctx_or_authors)\n</code></pre> <p>Make an action row builder with a delete button from a list of authors.</p> <p>Parameters:</p> <ul> <li> <code>*ctx_or_authors</code>               (<code>Union[Snowflakeish, Context, AutocompleteContext, BaseContext[Any]]</code>, default:                   <code>()</code> )           \u2013            <p>IDs of authors who should be allowed to delete the response.</p> <p>Both user IDs and role IDs are supported with no IDs indicating that anybody should be able to delete the response.</p> <p>Tanjun and Yuyo contexts can also be passed here to target their author.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>ActionRowBuilder</code>           \u2013            <p>Action row builder with a delete button.</p> </li> </ul>"},{"location":"reference/components/#tanchan.components.buttons.load_buttons","title":"load_buttons","text":"<pre><code>load_buttons(client)\n</code></pre> <p>Load this module's components into a bot.</p>"},{"location":"reference/components/#tanchan.components.buttons.make_delete_id","title":"make_delete_id","text":"<pre><code>make_delete_id(author, /, *authors)\n</code></pre> <p>Make a delete button custom ID.</p>"},{"location":"reference/components/#tanchan.components.buttons.on_delete_button","title":"on_delete_button  <code>async</code>","text":"<pre><code>on_delete_button(ctx)\n</code></pre> <p>Default implementation of a constant callback used by delete buttons.</p> <p>Parameters:</p> <ul> <li> <code>ctx</code>               (<code>ComponentContext</code>)           \u2013            <p>The context that triggered this delete.</p> </li> </ul>"},{"location":"reference/components/#tanchan.components.buttons.unload_buttons","title":"unload_buttons","text":"<pre><code>unload_buttons(client)\n</code></pre> <p>Unload this module's components from a bot.</p>"},{"location":"reference/components/#tanchan.components.config","title":"tanchan.components.config","text":"<p>Configuration classes for Tanchan's command components.</p>"},{"location":"reference/components/#tanchan.components.config.Config","title":"Config","text":"<p>               Bases: <code>EvalConfig</code>, <code>HelpConfig</code></p> <p>Full configuration for Tan-chan's commands and components.</p> <p>Config.add_to_client should be used to set this config.</p> <p>Examples:</p> <pre><code>client = tanjun.Client.from_gateway_bot(bot)\nconfig = yuyo.components.config.Config(\n    eval_guild_ids=None,\n    enable_slash_command=True,\n)\n\nconfig.add_to_client(client)\n</code></pre>"},{"location":"reference/components/#tanchan.components.config.Config.enable_message_command","title":"enable_message_command  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>enable_message_command = True\n</code></pre> <p>Whether the help message command should be enabled.</p>"},{"location":"reference/components/#tanchan.components.config.Config.enable_slash_command","title":"enable_slash_command  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>enable_slash_command = False\n</code></pre> <p>Whether the help slash command should be enabled.</p>"},{"location":"reference/components/#tanchan.components.config.Config.eval_guild_ids","title":"eval_guild_ids  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>eval_guild_ids = field(default=())\n</code></pre> <p>ID of the guilds the eval slash command should be declared in.</p> <p>If None then the slash command will be declared in every guild (globally) and an empty collection ensures it isn't declared.</p>"},{"location":"reference/components/#tanchan.components.config.Config.include_message_commands","title":"include_message_commands  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>include_message_commands = True\n</code></pre> <p>Whether message commands should be included without the with_help decorator.</p> <p>If True then the command's callback docstring will be used as the description by default.</p>"},{"location":"reference/components/#tanchan.components.config.Config.include_slash_commands","title":"include_slash_commands  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>include_slash_commands = False\n</code></pre> <p>Whether slash commands should be included without the with_help decorator.</p> <p>If True then the command.description will be used as the description by default.</p>"},{"location":"reference/components/#tanchan.components.config.Config.add_to_client","title":"add_to_client","text":"<pre><code>add_to_client(client)\n</code></pre> <p>Add this config to a Tanjun client.</p> <p>Parameters:</p> <ul> <li> <code>client</code>               (<code>Union[Client, Client]</code>)           \u2013            <p>The client to add this config to.</p> </li> </ul>"},{"location":"reference/components/#tanchan.components.config.EvalConfig","title":"EvalConfig","text":"<p>Configuration for the eval commands.</p> <p>EvalConfig.add_to_client should be used to set this config.</p> <p>Examples:</p> <pre><code>client = tanjun.Client.from_gateway_bot(bot)\n(\n    yuyo.components.config.EvalConfig(eval_guild_ids=None)\n    .add_to_client(client)\n)\n</code></pre>"},{"location":"reference/components/#tanchan.components.config.EvalConfig.eval_guild_ids","title":"eval_guild_ids  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>eval_guild_ids = field(default=())\n</code></pre> <p>ID of the guilds the eval slash command should be declared in.</p> <p>If None then the slash command will be declared in every guild (globally) and an empty collection ensures it isn't declared.</p>"},{"location":"reference/components/#tanchan.components.config.EvalConfig.add_to_client","title":"add_to_client","text":"<pre><code>add_to_client(client)\n</code></pre> <p>Add this config to a Tanjun client.</p> <p>Parameters:</p> <ul> <li> <code>client</code>               (<code>Union[Client, Client]</code>)           \u2013            <p>The client to add this config to.</p> </li> </ul>"},{"location":"reference/components/#tanchan.components.config.HelpConfig","title":"HelpConfig","text":"<p>Configuration for the help commands.</p> <p>HelpConfig.add_to_client should be used to set this config.</p> <p>Examples:</p> <pre><code>client = tanjun.Client.from_gateway_bot(bot)\n(\n    yuyo.components.config.HelpConfig(enable_slash_command=True)\n    .add_to_client(client)\n)\n</code></pre>"},{"location":"reference/components/#tanchan.components.config.HelpConfig.enable_message_command","title":"enable_message_command  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>enable_message_command = True\n</code></pre> <p>Whether the help message command should be enabled.</p>"},{"location":"reference/components/#tanchan.components.config.HelpConfig.enable_slash_command","title":"enable_slash_command  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>enable_slash_command = False\n</code></pre> <p>Whether the help slash command should be enabled.</p>"},{"location":"reference/components/#tanchan.components.config.HelpConfig.include_message_commands","title":"include_message_commands  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>include_message_commands = True\n</code></pre> <p>Whether message commands should be included without the with_help decorator.</p> <p>If True then the command's callback docstring will be used as the description by default.</p>"},{"location":"reference/components/#tanchan.components.config.HelpConfig.include_slash_commands","title":"include_slash_commands  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>include_slash_commands = False\n</code></pre> <p>Whether slash commands should be included without the with_help decorator.</p> <p>If True then the command.description will be used as the description by default.</p>"},{"location":"reference/components/#tanchan.components.config.HelpConfig.add_to_client","title":"add_to_client","text":"<pre><code>add_to_client(client)\n</code></pre> <p>Add this config to a Tanjun client.</p> <p>Parameters:</p> <ul> <li> <code>client</code>               (<code>Union[Client, Client]</code>)           \u2013            <p>The client to add this config to.</p> </li> </ul>"},{"location":"reference/components/#tanchan.components.eval","title":"tanchan.components.eval","text":"<p>Bot owner-only commands for dynamically executing code in the bot.</p>"},{"location":"reference/components/#tanchan.components.eval.load_sudo","title":"load_sudo","text":"<pre><code>load_sudo(client)\n</code></pre> <p>Load this module's components into a bot.</p>"},{"location":"reference/components/#tanchan.components.eval.unload_sudo","title":"unload_sudo","text":"<pre><code>unload_sudo(client)\n</code></pre> <p>Unload this module's components from a bot.</p>"},{"location":"reference/components/#tanchan.components.help","title":"tanchan.components.help","text":"<p>A components powered help command.</p>"},{"location":"reference/components/#tanchan.components.help.hide_from_help","title":"hide_from_help","text":"<pre><code>hide_from_help(cmd=None, /, *, follow_wrapped=False)\n</code></pre> <p>Hide a global command from the help command.</p> <p>Parameters:</p> <ul> <li> <code>follow_wrapped</code>               (<code>bool</code>, default:                   <code>False</code> )           \u2013            <p>Whether this should also apply the help information to the other command objects this wraps in a decorator call chain.</p> </li> </ul> <p>Examples:</p> <pre><code>@hide_from_command\n@tanjun.as_message_command(\"name\")\nasync def command(ctx: tanjun.abc.Context) -&gt; None:\n    '''Meow command.'''\n</code></pre>"},{"location":"reference/components/#tanchan.components.help.load_help","title":"load_help","text":"<pre><code>load_help(client)\n</code></pre> <p>Load this module's components into a bot.</p>"},{"location":"reference/components/#tanchan.components.help.reload","title":"reload","text":"<pre><code>reload(_=None, /, *, client, static_index, help_config=_DEFAULT_CONFIG)\n</code></pre> <p>Rebuild the help command's index to account for changes.</p>"},{"location":"reference/components/#tanchan.components.help.unload_help","title":"unload_help","text":"<pre><code>unload_help(client)\n</code></pre> <p>Unload this module's components from a bot.</p>"},{"location":"reference/components/#tanchan.components.help.with_help","title":"with_help","text":"<pre><code>with_help(description=None, /, *, category=None, follow_wrapped=False)\n</code></pre> <p>Override the help string for the command.</p> <p>Parameters:</p> <ul> <li> <code>description</code>               (<code>Union[str, Mapping[str, str], None]</code>, default:                   <code>None</code> )           \u2013            <p>Description to set for the command.</p> <p>This supports Tanjun's localisation.</p> </li> <li> <code>category</code>               (<code>Optional[str]</code>, default:                   <code>None</code> )           \u2013            <p>Name of the category this command should be in. Defaults to the component's name.</p> </li> <li> <code>follow_wrapped</code>               (<code>bool</code>, default:                   <code>False</code> )           \u2013            <p>Whether this should also apply the help information to the other command objects this wraps in a decorator call chain.</p> </li> </ul> <p>Examples:</p> <pre><code>@hide_from_command(\"Alternative description.\")\n@tanjun.as_message_command(\"name\")\nasync def command(ctx: tanjun.abc.Context) -&gt; None:\n    ...\n</code></pre>"},{"location":"reference/doc_parse/","title":"tanchan.doc_parse","text":"<p>tanjun.annotations extension which uses docstring parsing.</p>"},{"location":"reference/doc_parse/#tanchan.doc_parse.SlashCommandGroup","title":"SlashCommandGroup","text":"<p>               Bases: <code>SlashCommandGroup</code></p> <p>Extended implementation of tanjun.SlashCommandGroup with some doc parsing.</p>"},{"location":"reference/doc_parse/#tanchan.doc_parse.SlashCommandGroup.as_sub_command","title":"as_sub_command","text":"<pre><code>as_sub_command(name=None, description=None, *, always_defer=False, default_to_ephemeral=None, sort_options=True, validate_arg_keys=True)\n</code></pre> <p>Build a tanjun.SlashCommand in this command group by decorating a function.</p> <p>Note</p> <p>If you want your first response to be ephemeral while using <code>always_defer</code>, you must set <code>default_to_ephemeral</code> to <code>True</code>.</p> <p>Parameters:</p> <ul> <li> <code>name</code>               (<code>Union[str, Mapping[str, str], None]</code>, default:                   <code>None</code> )           \u2013            <p>The command's name (supports localisation).</p> <p>If left as None then the command callback's name will be used.</p> <p>This must fit discord's requirements.</p> </li> <li> <code>description</code>               (<code>Union[str, Mapping[str, str], None]</code>, default:                   <code>None</code> )           \u2013            <p>The command's description.</p> <p>If left as None then the first line of the command callback's description will be used.</p> <p>This should be inclusively between 1-100 characters in length.</p> </li> <li> <code>always_defer</code>               (<code>bool</code>, default:                   <code>False</code> )           \u2013            <p>Whether the contexts this command is executed with should always be deferred before being passed to the command's callback.</p> </li> <li> <code>default_to_ephemeral</code>               (<code>Optional[bool]</code>, default:                   <code>None</code> )           \u2013            <p>Whether this command's responses should default to ephemeral unless flags are set to override this.</p> <p>If this is left as None then the default set on the parent command(s), component or client will be in effect.</p> </li> <li> <code>sort_options</code>               (<code>bool</code>, default:                   <code>True</code> )           \u2013            <p>Whether this command should sort its set options based on whether they're required.</p> <p>If this is True then the options are re-sorted to meet the requirement from Discord that required command options be listed before optional ones.</p> </li> <li> <code>validate_arg_keys</code>               (<code>bool</code>, default:                   <code>True</code> )           \u2013            <p>Whether to validate that option keys match the command callback's signature.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>Callable[[SlashCallbackSig], SlashCommand]</code>           \u2013            <p>The decorator callback used to make a sub-command.</p> <p>This can either wrap a raw command callback or another callable command instance (e.g. tanjun.MenuCommand, tanjun.MessageCommand tanjun.SlashCommand).</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>ValueError</code>             \u2013            <p>Raises a value error for any of the following reasons:</p> <ul> <li>If the command name doesn't fit Discord's requirements.</li> <li>If the command name has uppercase characters.</li> <li>If the description is over 100 characters long.</li> </ul> </li> </ul>"},{"location":"reference/doc_parse/#tanchan.doc_parse.SlashCommandGroup.make_sub_group","title":"make_sub_group","text":"<pre><code>make_sub_group(name, description, /, *, default_to_ephemeral=None)\n</code></pre> <p>Create a sub-command group in this group.</p> <p>Note</p> <p>Unlike message command groups, slash command groups cannot be callable functions themselves.</p> <p>Parameters:</p> <ul> <li> <code>name</code>               (<code>Union[str, Mapping[str, str]]</code>)           \u2013            <p>The name of the command group (supports localisation).</p> <p>This must fit discord's requirements.</p> </li> <li> <code>description</code>               (<code>Union[str, Mapping[str, str]]</code>)           \u2013            <p>The description of the command group.</p> </li> <li> <code>default_to_ephemeral</code>               (<code>Optional[bool]</code>, default:                   <code>None</code> )           \u2013            <p>Whether this command's responses should default to ephemeral unless flags are set to override this.</p> <p>If this is left as None then the default set on the parent command(s), component or client will be in effect.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>SlashCommandGroup</code>           \u2013            <p>The created sub-command group.</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>ValueError</code>             \u2013            <p>Raises a value error for any of the following reasons:</p> <ul> <li>If the command name doesn't fit Discord's requirements.</li> <li>If the command name has uppercase characters.</li> <li>If the description is over 100 characters long.</li> </ul> </li> </ul>"},{"location":"reference/doc_parse/#tanchan.doc_parse.as_slash_command","title":"as_slash_command","text":"<pre><code>as_slash_command(*, always_defer=False, default_member_permissions=None, default_to_ephemeral=None, description=None, dm_enabled=None, is_global=True, name=None, nsfw=False, sort_options=True, validate_arg_keys=True)\n</code></pre> <p>Build a tanjun.SlashCommand by decorating a function.</p> <p>This uses the function's name as the command's name and the first line of its docstring as the command's description.</p> <p>Note</p> <p>Under the standard implementation, <code>is_global</code> is used to determine whether the command should be bulk set by Client.declare_global_commands or when <code>declare_global_commands</code> is True</p> <p>Warning</p> <p><code>default_member_permissions</code>, <code>dm_enabled</code> and <code>is_global</code> are ignored for commands within slash command groups.</p> <p>Note</p> <p>If you want your first response to be ephemeral while using <code>always_defer</code>, you must set <code>default_to_ephemeral</code> to <code>True</code>.</p> <p>Examples:</p> <pre><code>@doc_parse.as_slash_command()  # This command will be called \"ping\"\nasync def ping(ctx: tanjun.abc.SlashContext) -&gt; None:\n    \"\"\"Get the bot's latency.\"\"\"\n    start_time = time.perf_counter()\n    await ctx.rest.fetch_my_user()\n    time_taken = (time.perf_counter() - start_time) * 1_000\n    await ctx.respond(f\"PONG\\n - REST: {time_taken:.0f}mss\")\n</code></pre> <p>Parameters:</p> <ul> <li> <code>always_defer</code>               (<code>bool</code>, default:                   <code>False</code> )           \u2013            <p>Whether the contexts this command is executed with should always be deferred before being passed to the command's callback.</p> </li> <li> <code>default_member_permissions</code>               (<code>Union[Permissions, int, None]</code>, default:                   <code>None</code> )           \u2013            <p>Member permissions necessary to utilize this command by default.</p> <p>If this is None then the configuration for the parent component or client will be used.</p> </li> <li> <code>default_to_ephemeral</code>               (<code>Optional[bool]</code>, default:                   <code>None</code> )           \u2013            <p>Whether this command's responses should default to ephemeral unless flags are set to override this.</p> <p>If this is left as None then the default set on the parent command(s), component or client will be in effect.</p> </li> <li> <code>dm_enabled</code>               (<code>Optional[bool]</code>, default:                   <code>None</code> )           \u2013            <p>Whether this command is enabled in DMs with the bot.</p> <p>If this is None then the configuration for the parent component or client will be used.</p> </li> <li> <code>is_global</code>               (<code>bool</code>, default:                   <code>True</code> )           \u2013            <p>Whether this command is a global command.</p> </li> <li> <code>name</code>               (<code>Union[str, Mapping[str, str], None]</code>, default:                   <code>None</code> )           \u2013            <p>The command's name.</p> <p>This must fit discord's requirements and if left as None then the command callback's name is used.</p> </li> <li> <code>nsfw</code>               (<code>bool</code>, default:                   <code>False</code> )           \u2013            <p>Whether this command should only be accessible in channels marked as nsfw.</p> </li> <li> <code>sort_options</code>               (<code>bool</code>, default:                   <code>True</code> )           \u2013            <p>Whether this command should sort its set options based on whether they're required.</p> <p>If this is True then the options are re-sorted to meet the requirement from Discord that required command options be listed before optional ones.</p> </li> <li> <code>validate_arg_keys</code>               (<code>bool</code>, default:                   <code>True</code> )           \u2013            <p>Whether to validate that option keys match the command callback's signature.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>Callable[[SlashCallbackSig], SlashCommand]</code>           \u2013            <p>The decorator callback used to make a tanjun.SlashCommand.</p> <p>This can either wrap a raw command callback or another callable command instance (e.g. tanjun.MenuCommand, tanjun.MessageCommand tanjun.SlashCommand) and will manage loading the other command into a component when using Component.load_from_scope.</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>ValueError</code>             \u2013            <p>Raises a value error for any of the following reasons:</p> <ul> <li>If the command name is over 32 characters long.</li> <li>If the command name has uppercase characters.</li> <li>If the description is over 100 characters long.</li> </ul> </li> </ul>"},{"location":"reference/doc_parse/#tanchan.doc_parse.slash_command_group","title":"slash_command_group","text":"<pre><code>slash_command_group(name, description, /, *, default_member_permissions=None, default_to_ephemeral=None, dm_enabled=None, is_global=True, nsfw=False)\n</code></pre> <p>Create a slash command group.</p> <p>Note</p> <p>Unlike message command groups, slash command groups cannot be callable functions themselves.</p> <p>Warning</p> <p><code>default_member_permissions</code>, <code>dm_enabled</code> and <code>is_global</code> are ignored for command groups within other slash command groups.</p> <p>Note</p> <p>Under the standard implementation, <code>is_global</code> is used to determine whether the command should be bulk set by Client.declare_global_commands or when <code>declare_global_commands</code> is True</p> <p>Examples:</p> <p>Sub-commands can be added to the created slash command object through the following decorator based approach:</p> <pre><code>help_group = doc_parse.slash_command_group(\"help\", \"get help\")\n\n@tanjun.with_str_slash_option(\"command_name\", \"command name\")\n@help_group.as_sub_command\nasync def help(ctx: tanjun.abc.SlashContext, command_name: str) -&gt; None:\n    \"\"\"Get help with a command.\"\"\"\n\n@help_group.as_sub_command\nasync def me(ctx: tanjun.abc.SlashContext) -&gt; None:\n    \"\"\"Help me.\"\"\"\n\ncomponent = tanjun.Component().add_slash_command(help_group)\n</code></pre> <p>Parameters:</p> <ul> <li> <code>name</code>               (<code>Union[str, Mapping[str, str]]</code>)           \u2013            <p>The name of the command group (supports localisation).</p> <p>This must fit discord's requirements.</p> </li> <li> <code>description</code>               (<code>Union[str, Mapping[str, str]]</code>)           \u2013            <p>The description of the command group (supports localisation).</p> <p>This should be inclusively between 1-100 characters in length.</p> </li> <li> <code>default_member_permissions</code>               (<code>Union[Permissions, int, None]</code>, default:                   <code>None</code> )           \u2013            <p>Member permissions necessary to utilize this command by default.</p> <p>If this is None then the configuration for the parent component or client will be used.</p> </li> <li> <code>default_to_ephemeral</code>               (<code>Optional[bool]</code>, default:                   <code>None</code> )           \u2013            <p>Whether this command's responses should default to ephemeral unless flags are set to override this.</p> <p>If this is left as None then the default set on the parent command(s), component or client will be in effect.</p> </li> <li> <code>dm_enabled</code>               (<code>Optional[bool]</code>, default:                   <code>None</code> )           \u2013            <p>Whether this command is enabled in DMs with the bot.</p> <p>If this is None then the configuration for the parent component or client will be used.</p> </li> <li> <code>is_global</code>               (<code>bool</code>, default:                   <code>True</code> )           \u2013            <p>Whether this command is a global command.</p> </li> <li> <code>nsfw</code>               (<code>bool</code>, default:                   <code>False</code> )           \u2013            <p>Whether this command should only be accessible in channels marked as nsfw.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>SlashCommandGroup</code>           \u2013            <p>The command group.</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>ValueError</code>             \u2013            <p>Raises a value error for any of the following reasons:</p> <ul> <li>If the command name doesn't fit Discord's requirements.</li> <li>If the command name has uppercase characters.</li> <li>If the description is over 100 characters long.</li> </ul> </li> </ul>"},{"location":"reference/doc_parse/#tanchan.doc_parse.with_annotated_args","title":"with_annotated_args","text":"<pre><code>with_annotated_args(command=None, /, *, doc_style=None, follow_wrapped=False)\n</code></pre> <p>Docstring parsing implementation of tanjun.annotations.with_annotated_args.</p> <p>Examples:</p> <p>This will parse command option descriptions from the command's docstring.</p> <pre><code>@doc_parse.with_annotated_args\n@doc_parse.as_slash_command()\nasync def toggle_setting(ctx: tanjun.abc.Context, user: annotations.User, state: annotations.Bool = False) -&gt; None:\n    \"\"\"Toggle this setting for a user.\n\n    Parameters\n    ----------\n    user\n        The user to toggle this setting for.\n    state\n        Whether this should be enabled.\n    \"\"\"\n\n@doc_parse.with_annotated_args\n@doc_parse.as_slash_command()\nasync def ban_user(ctx: tanjun.abc.Context, user: annotations.User) -&gt; None:\n    \"\"\"Ban a user from this guild.\n\n    Args:\n        user:\n            The user to ban.\n    \"\"\"\n\n@doc_parse.with_annotated_args\n@doc_parse.as_slash_command()\nasync def unban_user(ctx: tanjun.abc.Context, user: annotations.User, reason: str = None) -&gt; None:\n    \"\"\"Unban a user from this guild.\n\n    :param user: The user to unban.\n    :param reason: The reason for unbanning them.\n    \"\"\"\n</code></pre> <p>This also supports parsing option descriptions from the typed dict that's being used as the unpacked <code>**kwargs</code> type-hint.</p> <pre><code>class BulkMessagOptions(typing.TypedDict, total=False):\n    \"\"\"Reused bulk message command options.\n\n    Parameters\n    ----------\n    count\n        The amount of messages to target.\n    regex\n        A regular expression to match against message contents.\n    \"\"\"\n\n    count: annotations.Int\n    regex: annotations.Str\n\n@doc_parse.with_annotated_args\n@doc_parse.as_slash_command()\nasync def delete_messages(\n    ctx: tanjun.abc.Context, reason: str = None, **kwargs: typing.Unpack[BulkMessagOptions]\n) -&gt; None:\n    \"\"\"Toggle this setting for a user.\n\n    Parameters\n    ----------\n    reasom\n        Why you're bulk deleting these messages.\n    \"\"\"\n</code></pre> <p>Parameters:</p> <ul> <li> <code>command</code>               (<code>SlashCommand | MessageCommand</code>, default:                   <code>None</code> )           \u2013            <p>The message or slash command to set the arguments for.</p> </li> <li> <code>doc_style</code>               (<code>Optional[_DocStyleUnion]</code>, default:                   <code>None</code> )           \u2013            <p>The docstyle to parse slash command option descriptions from.</p> <p>This may be either <code>\"google\"</code>, <code>\"numpy\"</code>, or <code>\"reST\"</code>. If left as None then this will try to auto-detect the style.</p> </li> <li> <code>follow_wrapped</code>               (<code>bool</code>, default:                   <code>False</code> )           \u2013            <p>Whether this should also set the arguments on any other command objects this wraps in a decorator call chain.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>SlashCommand | MessageCommand</code>           \u2013            <p>The command object to enable using this as a decorator.</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>RuntimeError</code>             \u2013            <p>If <code>doc_style</code> is None and this failed to detect the docstring style.</p> </li> </ul>"}]}